# üìÑ organize.py - Documentation

## üéØ Purpose
Organizes extracted CSV files into user-specific folders for better data management and analysis. Creates a clean, structured directory layout from the scattered output files.

---

## üîß How It Works

### Core Functionality
1. **File Discovery**: Scans specified folder for CSV files
2. **User Matching**: Links files to usernames using pattern matching
3. **Folder Creation**: Creates individual directories for each user
4. **File Movement**: Moves related files into appropriate folders

### Process Flow
```
Scattered CSV Files ‚Üí Pattern Recognition ‚Üí User Folders ‚Üí Organized Structure
```

---

## üìÅ Before & After Structure

### Before Organization
```
project_folder/
‚îú‚îÄ‚îÄ user1_posts.csv
‚îú‚îÄ‚îÄ user1_posts_comments.csv
‚îú‚îÄ‚îÄ user2_posts.csv  
‚îú‚îÄ‚îÄ user2_posts_comments.csv
‚îú‚îÄ‚îÄ user3_posts.csv
‚îú‚îÄ‚îÄ user3_posts_comments.csv
‚îú‚îÄ‚îÄ accounts.csv
‚îî‚îÄ‚îÄ other_files...
```

### After Organization
```
project_folder/
‚îú‚îÄ‚îÄ organized_folder/
‚îÇ   ‚îú‚îÄ‚îÄ user1/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user1_posts.csv
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user1_posts_comments.csv
‚îÇ   ‚îú‚îÄ‚îÄ user2/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user2_posts.csv
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user2_posts_comments.csv
‚îÇ   ‚îî‚îÄ‚îÄ user3/
‚îÇ       ‚îú‚îÄ‚îÄ user3_posts.csv
‚îÇ       ‚îî‚îÄ‚îÄ user3_posts_comments.csv
‚îú‚îÄ‚îÄ accounts.csv (remains in root)
‚îî‚îÄ‚îÄ other_files... (unchanged)
```

---

## ‚öôÔ∏è Configuration & Requirements

### Required Files
- **accounts.csv**: Must contain username column
- **CSV data files**: Generated by previous extraction steps
- **Source folder**: Directory containing the CSV files

### File Naming Conventions
The script expects files to follow these patterns:
```
{username}_posts.csv          # Post data
{username}_posts_comments.csv # Comment data  
{username}_any_suffix.csv     # Any file containing username
```

---

## üöÄ Usage Instructions

### Interactive Execution

#### Windows
```cmd
python organize.py
```

#### macOS/Linux
```bash
python3 organize.py
```

### Input Prompts
1. **Folder Path**: Enter the directory containing your CSV files
   ```
   Enter the folder path where all the .csv files are: C:\path\to\csvs
   ```

### Expected Output
```
Moved C:\csvs\user1_posts.csv -> C:\csvs\organized_folder\user1\user1_posts.csv
Moved C:\csvs\user1_posts_comments.csv -> C:\csvs\organized_folder\user1\user1_posts_comments.csv
Moved C:\csvs\user2_posts.csv -> C:\csvs\organized_folder\user2\user2_posts.csv
...
```

---

## üìä File Matching Logic

### Pattern Recognition
```python
for user in df["username"]:
    for f in os.listdir(search_folder):
        if user in f:  # Simple substring matching
            # File contains username -> move to user folder
```

### Matching Examples
| Username | Files Matched | Files Ignored |
|----------|---------------|---------------|
| john_doe | `john_doe_posts.csv`<br/>`john_doe_comments.csv` | `accounts.csv`<br/>`summary.csv` |
| travel_blog | `travel_blog_posts.csv`<br/>`travel_blog_data.csv` | `john_doe_posts.csv` |

---

## üõ°Ô∏è Safety Features

### File Existence Checks
```python
if os.path.exists(filepath):  # Verify file still exists
    # Proceed with move operation
```

### Directory Creation
```python
os.makedirs(user_folder, exist_ok=True)  # Create folders safely
```

### Duplicate Handling
- **Overwrites**: Files with same names are replaced
- **Safety**: Original files are moved (not copied)
- **Recovery**: Files remain in organized structure

---

## ‚ö†Ô∏è Important Considerations

### Data Safety
üî¥ **Files are MOVED, not copied**
- Original files disappear from source location
- Files appear in new organized structure
- **Backup recommended** before running

### Username Sensitivity  
‚ö†Ô∏è **Case-sensitive matching**
- accounts.csv: `John_Doe`
- File: `john_doe_posts.csv`  
- Result: **No match** (different cases)

### File Conflicts
‚ö†Ô∏è **Same filename handling**
- If `user1_posts.csv` exists in destination
- New file overwrites existing file
- **No warning given**

---

## üîß Customization Options

### Modifying Search Patterns
```python
# Current: Simple substring matching
if user in f:

# Custom: Exact prefix matching  
if f.startswith(f"{user}_"):

# Custom: Regex patterns
import re
if re.match(f"^{user}[_-].*\.csv$", f):
```

### Alternative Folder Structure
```python
# Current: organized_folder/
folder_name = f"{search_folder}/organized folder"

# Custom: Timestamped folders
from datetime import datetime
timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
folder_name = f"{search_folder}/organized_{timestamp}"
```

---

## üìà Performance & Scalability

### Processing Speed
- **Fast**: Operates on file system level
- **Efficient**: Simple string matching operations
- **Scalable**: Handles hundreds of users/files

### Memory Usage
- **Low**: Processes one file at a time  
- **Stable**: No large data structures in memory
- **Lightweight**: Minimal resource requirements

### Typical Execution Times
| File Count | Processing Time |
|-----------|-----------------|
| 10-50 files | < 1 second |
| 100-200 files | 1-2 seconds |
| 500+ files | 2-5 seconds |

---

## üêõ Troubleshooting

### Common Issues

**No Files Moved**
```
# No output/movement occurs
```
**Possible Causes:**
- Username mismatch between accounts.csv and filenames
- Files already in organized folder
- Incorrect folder path provided

**Permission Errors**
```
PermissionError: Access denied
```
**Solutions:**
- Run terminal/cmd as administrator
- Check file permissions
- Ensure files aren't open in other programs

**accounts.csv Not Found**
```  
FileNotFoundError: accounts.csv
```
**Solutions:**
- Ensure accounts.csv is in the same directory as organize.py
- Check file name spelling
- Verify CSV format with 'username' column

### Debugging Steps
1. **Check file list**: Verify CSV files exist in source folder
2. **Verify accounts.csv**: Ensure usernames match file prefixes  
3. **Test permissions**: Ensure write access to destination
4. **Review paths**: Check folder path format (Windows vs Unix)

---

## üí° Best Practices

### Before Running
1. **Backup data**: Copy important files to safe location
2. **Verify accounts.csv**: Ensure all usernames are listed
3. **Check permissions**: Ensure write access to target directory
4. **Review file names**: Confirm naming conventions match

### During Execution
1. **Monitor output**: Watch for successful move messages
2. **Check for errors**: Look for permission or path issues  
3. **Verify completion**: Ensure all expected files are moved

### After Completion
1. **Validate structure**: Check organized folders contain correct files
2. **Count files**: Verify no files were lost in the process
3. **Test access**: Ensure you can open organized files
4. **Clean up**: Remove empty directories if desired

---

## üîó Integration with Workflow

### Prerequisites  
‚úÖ **Completed post extraction** ‚Üí `username_posts.csv` files exist  
‚úÖ **Completed comment extraction** ‚Üí `username_posts_comments.csv` files exist  
‚úÖ **Valid accounts.csv** ‚Üí Contains all target usernames

### Workflow Position
```
1. post_link_extract.py    # Creates post CSV files
2. comments_extract.py     # Creates comment CSV files  
3. organize.py            # ‚Üê Final step: Organizes all files
4. Data Analysis          # Work with organized structure
```

### Next Steps After Organization
1. **Data Analysis**: Use organized folders for easier processing
2. **Reporting**: Generate insights from structured data
3. **Archiving**: Backup organized folders for long-term storage
4. **Distribution**: Share specific user folders with team members

----
Author: Saad Makki\
Email: saadmakki116@gmail.com
---
**[‚¨ÖÔ∏è Back to Main README](../README.md)**